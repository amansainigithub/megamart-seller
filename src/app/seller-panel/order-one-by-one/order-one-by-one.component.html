

<div class="mt-3">
    <input 
          type="text" 
          class="form-control custom-input" 
          placeholder="Search by Tracking ID, Product Name, or Order Number" 
          [formControl]="searchControl"
          (input)="onSearch()">
</div>

<mat-tab-group class="mt-4" mat-stretch-tabs="false" mat-align-tabs="start" (selectedTabChange)="onTabChange($event)">

    <mat-tab label="Pending Orders">
        <div *ngIf="orders?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPagePending($event)" showFirstLastButtons>
            </mat-paginator>

            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Order Details</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let order of orders; let i = index" [expanded]="i === 0" class="mb-3">

                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">

                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER NO:</span>
                                    {{ order.customOrderNumber }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">PP:</span>
                                    ₹ {{order.productPrice}}
                                </span>

                                <span class="changeDesign">
                                    <span class="headerH">Q * P:</span>
                                    ₹ {{ order.quantity * order.productPrice }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{order.orderDateTime}}
                                </span>

                                <span *ngIf="order.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{order.paymentMode}}</span>
                                </span>

                                <span *ngIf="order.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{order.paymentMode}}</span>
                                </span>

                                <button [routerLink]="['/customer/orders-details/', order.id]" mat-raised-button
                                    color="warn" class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>

                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="order.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>

                                <div class="col-md-6">

                                    <div>
                                        <div *ngIf="order.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>

                                        <div *ngIf="order.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>

                                        <div *ngIf="order.deliveryStatus === 'PENDING'"
                                            class="d-flex justify-content-between align-items-center mt-1">
                                            <span class="bg-light text-danger fs11 fw-bold">PENDING</span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-hourglass-split"></i>
                                                    Estimated Delivery
                                                </strong>
                                                <span *ngIf="order.deliveryDateTime" class="bg-warning text-dark rounded-3 p-1">
                                                    {{ order.deliveryDateTime }}
                                                  </span>
                                                  <span *ngIf="!order.deliveryDateTime;">
                                                    Not available
                                                  </span>
                                            </small>
                                            
                                        </div>

                                    </div>

                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ order.productName }}
                                        </p>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details mt-1 mb-1">
                                        <span>
                                            <strong>Order Number:</strong>
                                            <span>&nbsp; {{ order.customOrderNumber }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Id: </strong>
                                            <span>&nbsp; {{ order.id }}</span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ order.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ order.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ order.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ order.area }},
                                                {{ order.addressLine1 }},
                                                {{ order.addressLine2}},
                                                {{ order.postalCode}}
                                            </span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{order.userId}} | <strong>{{order.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>

                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ order.quantity }}</td>
                                                <td>₹{{ order.productPrice }}</td>
                                                <td>{{ order.productSize }}</td>
                                                <td>{{ order.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>

                                        <button (click)="updateTrackerData(order.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>

                                <div class="col-md-5 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(order.deliveryStatus), 'completed': i < getStatusIndex(order.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(order.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(order.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->


                                </div>
                            </div>
                        </div>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>

            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPagePending($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="!orders"
             class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
            <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
            <p class="mt-2">Data Not Found Pending Orders</p>
          </div>
          
    </mat-tab>

    <mat-tab label="Shipped Orders">
        <div *ngIf="shippedData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageShipping($event)" showFirstLastButtons>
            </mat-paginator>

            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Shipped Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let shippedNode of shippedData; let i = index" [expanded]="i === 0"
                        class="mb-3">

                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">

                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER NO:</span>
                                    {{ shippedNode.customOrderNumber }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{shippedNode.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{shippedNode.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{shippedNode.orderDateTime}}
                                </span>

                                <span *ngIf="shippedNode.paymentMode === 'COD'"
                                    class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{shippedNode.paymentMode}}</span>
                                </span>

                                <span *ngIf="shippedNode.paymentMode === 'ONLINE'"
                                    class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{shippedNode.paymentMode}}</span>
                                </span>

                                <button [routerLink]="['/customer/orders-details/', shippedNode.id]" mat-raised-button
                                    color="warn" class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>

                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3" >
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="shippedNode.fileUrl" alt="Product" height="50" width="50"
                                            class="me-2">
                                    </div>
                                </div>

                                <div class="col-md-7">

                                    <div>
                                        <div *ngIf="shippedNode.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>

                                        <div *ngIf="shippedNode.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>

                                        <div *ngIf="shippedNode.deliveryStatus === 'SHIPPED'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                SHIPPED
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                                <span class="bg-warning text-dark rounded-3 p-1">
                                                {{ shippedNode.deliveryDateTime}}
                                                </span>
                                            </small>
                                        </div>
                                    </div>

                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ shippedNode.productName }}
                                        </p>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ shippedNode.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ shippedNode.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ shippedNode.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ shippedNode.area }},
                                                {{ shippedNode.addressLine1 }},
                                                {{ shippedNode.addressLine2}},
                                                {{ shippedNode.postalCode}}
                                            </span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{shippedNode.userId}} | <strong>{{shippedNode.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Tracking Number:</strong>
                                            <span  class="copy-text">
                                                &nbsp; {{ shippedNode.orderTrackingId }}
                                                 <i style="cursor: pointer;" (click)="copyToClipboard(shippedNode.orderTrackingId)" class="bi bi-copy"></i>
                                            </span>
                                            <span *ngIf="copied" class="text-success ms-2">Copied!</span>
                                        </span>
                                    </div>
                                    

                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ shippedNode.quantity }}</td>
                                                <td>₹{{shippedNode.productPrice }}</td>
                                                <td>{{ shippedNode.productSize }}</td>
                                                <td>{{ shippedNode.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>

                                        <button (click)="updateDeliveryStatusN(shippedNode.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Change Tacker Status
                                        </button>
                                    </div>
                                </div>

                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(shippedNode.deliveryStatus), 'completed': i < getStatusIndex(shippedNode.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(shippedNode.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(shippedNode.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->


                                </div>
                            </div>
                        </div>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>

            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageShipping($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="shippedData?.length === 0 || shippedData?.length === ''"
             class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
            <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
            <p class="mt-2">Data Not Found Shipped Orders</p>
          </div>
    </mat-tab>

    <mat-tab label="Out of Delivery Orders">
        <div *ngIf="outOfDeliveryData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageOutofDelivery($event)" showFirstLastButtons>
            </mat-paginator>
        
            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Out of Delivery Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let OOData of outOfDeliveryData; let i = index" [expanded]="i === 0"
                        class="mb-3">
        
                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">
        
                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER NO:</span>
                                    {{ OOData.customOrderNumber }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{OOData.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{OOData.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{OOData.orderDateTime}}
                                </span>
        
                                <span *ngIf="OOData.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{OOData.paymentMode}}</span>
                                </span>
        
                                <span *ngIf="OOData.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{OOData.paymentMode}}</span>
                                </span>
        
                                <button [routerLink]="['/customer/orders-details/', OOData.id]" mat-raised-button color="warn"
                                    class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
        
                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="OOData.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>
        
                                <div class="col-md-7">
        
                                    <div>
                                        <div *ngIf="OOData.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>
        
                                        <div *ngIf="OOData.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>
        
                                        <div *ngIf="OOData.deliveryStatus === 'OUT_OF_DELIVERY'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                OUT OF DELIVERY
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                                <span class="bg-warning text-dark rounded-3 p-1">
                                                    {{ OOData.deliveryDateTime}}
                                                    </span>
                                            </small>
                                        </div>
                                    </div>
        
                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ OOData.productName }}
                                        </p>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ OOData.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ OOData.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ OOData.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ OOData.area }},
                                                {{ OOData.addressLine1 }},
                                                {{ OOData.addressLine2}},
                                                {{ OOData.postalCode}}
                                            </span>
                                        </span>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{OOData.userId}} | <strong>{{OOData.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>
        
                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ OOData.quantity }}</td>
                                                <td>₹{{OOData.productPrice }}</td>
                                                <td>{{ OOData.productSize }}</td>
                                                <td>{{ OOData.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
        
                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>
        
                                        <button (click)="updateDeliveryStatusN(OOData.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>
        
                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(OOData.deliveryStatus), 'completed': i < getStatusIndex(OOData.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(OOData.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(OOData.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->
        
        
                                </div>
                            </div>
                        </div>
        
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageOutofDelivery($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="outOfDeliveryData?.length === 0 || outOfDeliveryData?.length === ''"
        class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
       <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
       <p class="mt-2">Data Not Found Out of Delivery Orders</p>
        </div>
    </mat-tab>

    <mat-tab label="Delivered">
         <div *ngIf="deliveredData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageDelivered($event)" showFirstLastButtons>
            </mat-paginator>
        
            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Delivered Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let delivered of deliveredData; let i = index" [expanded]="i === 0"
                        class="mb-3">
        
                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">
        
                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER No:</span>
                                    {{ delivered.customOrderNumber }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{delivered.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{delivered.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{delivered.orderDateTime}}
                                </span>
        
                                <span *ngIf="delivered.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{delivered.paymentMode}}</span>
                                </span>
        
                                <span *ngIf="delivered.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{delivered.paymentMode}}</span>
                                </span>
        
                                <button [routerLink]="['/customer/orders-details/', delivered.id]" mat-raised-button color="warn"
                                    class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
        
                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="delivered.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>
        
                                <div class="col-md-7">
        
                                    <div>
                                        <div *ngIf="delivered.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>
        
                                        <div *ngIf="delivered.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>
        
                                        <div *ngIf="delivered.deliveryStatus === 'DELIVERED'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                DELIVERED
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                               <span class="bg-warning text-dark rounded-2 p-1" >
                                                {{ delivered.deliveryDateTime}}
                                               </span>
                                            </small>
                                        </div>
                                    </div>
        
                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ delivered.productName }}
                                        </p>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ delivered.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ delivered.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ delivered.productSize }}</span>
                                        </span>delivered
                                        &nbsp; | &nbsp;
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ delivered.area }},
                                                {{ delivered.addressLine1 }},
                                                {{ delivered.addressLine2}},
                                                {{ delivered.postalCode}}
                                            </span>
                                        </span>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{delivered.userId}} | <strong>{{delivered.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>
        
                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ delivered.quantity }}</td>
                                                <td>₹{{ delivered.productPrice }}</td>
                                                <td>{{ delivered.productSize }}</td>
                                                <td>{{ delivered.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
        
                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>
        
                                        <button (click)="updateDeliveryStatusN(delivered.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>
        
                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(delivered.deliveryStatus), 'completed': i < getStatusIndex(delivered.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(delivered.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(delivered.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->
        
        
                                </div>
                            </div>
                        </div>
        
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageDelivered($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="deliveredData?.length === 0 || deliveredData?.length === ''"
            class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
        <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
        <p class="mt-2">Data Not Found Out of Delivered Orders</p>
        </div>
    </mat-tab>


</mat-tab-group>












<!-- Modal for Order Update Delivery Status -->
<div class="modal fade" id="pendingDeliveryModel" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">

                <p>Delivery Status <i class="bi bi-truck running-truck"></i></p>

                <form name="form" #userlogin="ngForm" (ngSubmit)="f.form.valid && updatPendingDeliveryStatus()" #f="ngForm">

                    <div class="col">
                        <div class="form-group">
                            <label class="fs12">Delivery Status</label>
                            <select class="form-control form-select-sm" name="deliveryStatus"
                                [(ngModel)]="deliveryForm.deliveryStatus" #deliveryStatus="ngModel" required
                                [ngClass]="{ 'is-invalid': deliveryStatus.errors && (deliveryStatus.touched || deliveryStatus.dirty) }">
                                <option value="" selected>Select Delivery Status</option>
                                <option value="SHIPPED">SHIPPED</option>
                                <option value="OUT_OF_DELIVERY">OUT_OF_DELIVERY</option>
                                <option value="DELIVERED">DELIVERED</option>
                                <option value="PENDING">PENDING</option>
                            </select>

                            <!-- Validation message -->
                            <div *ngIf="deliveryStatus.errors && (deliveryStatus.touched || deliveryStatus.dirty)"
                                class="invalid-feedback">
                                Delivery status is required.
                            </div>
                        </div>
                    </div>


                    <!-- POSTALCODE -->
                    <div class="col-12">
                        <label class="fs12">TrackerId</label>
                        <input type="tel" class="form-control form-control-sm" name="tackerId" required="required"
                            [(ngModel)]="deliveryForm.tackerId" #tackerId="ngModel" placeholder="Enter Tracker Id"
                            [ngClass]="{ 'is-invalid': tackerId.errors && (tackerId.touched || tackerId.dirty ) }">

                        <div *ngIf="tackerId.errors && (tackerId.touched || tackerId.dirty )" class="invalid-feedback">
                            <div *ngIf="tackerId.errors['required']">Tracker Id is required.</div>
                        </div>
                    </div>

                    <div class="col-12">
                        <label class="fs12">Expected Delivery Date/Time</label>
                        <input type="datetime-local" class="form-control form-control-sm" name="deliveryDate" required="required"
                            [(ngModel)]="deliveryForm.deliveryDateTime" #deliveryDateTime="ngModel"
                            placeholder="Expected Delivery Date"
                            [ngClass]="{ 'is-invalid': deliveryDateTime.errors && (deliveryDateTime.touched || deliveryDateTime.dirty ) }">

                        <div *ngIf="deliveryDateTime.errors && (deliveryDateTime.touched || deliveryDateTime.dirty )"
                            class="invalid-feedback">
                            <div *ngIf="deliveryDateTime.errors['required']">Delivery DateTime is required.</div>
                        </div>
                    </div>


                    <div class="col">
                        <div class="form-group">
                            <label class="fs12">Courier Partner</label>
                            <select class="form-control form-select-sm" name="deliveryStatus"
                                [(ngModel)]="deliveryForm.courierName" #courierName="ngModel" required
                                [ngClass]="{ 'is-invalid': courierName.errors && (courierName.touched || courierName.dirty) }">
                                <option value="" selected>Select Delivery Status</option>
                                <option value="DTDC">DTDC</option>
                                <option value="DELHIVERY">DELHIVERY</option>
                                <option value="INDIA_POST">INDIA POST</option>
                                <option value="SHIP_ROCKET">SHIP ROCKET</option>
                                <option value="BLUE_DART">BLUE DART</option>
                                <option value="ECOMM_EXPRESS">ECOMM EXPRESS</option>
                            </select>

                            <!-- Validation message -->
                            <div *ngIf="courierName.errors && (courierName.touched || courierName.dirty)"
                                class="invalid-feedback">
                                 Courier Partner is required.
                            </div>
                        </div>
                    </div>

                    
                    <button type="submit" [disabled]="f.invalid" mat-raised-button class="trackBtn mt-3">
                        Modify Order Tracker
                    </button>
                    
                    <div class="progress mt-2">
                        <div class="progress-bar progress-bar-striped progress-bar-animated"
                             role="progressbar" 
                             [style.width.%]="progressValue"
                             [attr.aria-valuenow]="progressValue" 
                             aria-valuemin="0" 
                             aria-valuemax="100">
                            {{ progressValue }}%
                        </div>
                    </div>
                    

                </form>

            </div>
        </div>
    </div>
</div>

<!-- Model Ending for Order Update Delivery Status -->



<!-- Modal for Order Update Delivery Status -->
<div class="modal fade" id="shippedAndNextDeliveryModel" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">

                <p>Delivery Status <i class="bi bi-truck running-truck"></i></p>

                <form name="form" #userlogin="ngForm" 
                (ngSubmit)="fD.form.valid && updateAfterPendingDeliveryStatus()" #fD="ngForm">

                    <div class="col">
                        <div class="form-group">
                            <label class="fs12">Delivery Status</label>
                            <select class="form-control form-select-sm" name="deliveryOrderNew"
                                [(ngModel)]="deliveryStatusFormData.updateDeliveryStatus" #updateDeliveryStatus="ngModel" required
                                [ngClass]="{ 'is-invalid': updateDeliveryStatus.errors && (updateDeliveryStatus.touched || updateDeliveryStatus.dirty) }">
                                <option value="" selected>Select Delivery Status</option>
                                <option value="SHIPPED">SHIPPED</option>
                                <option value="OUT_OF_DELIVERY">OUT_OF_DELIVERY</option>
                                <option value="DELIVERED">DELIVERED</option>
                                <option value="PENDING">PENDING</option>
                            </select>

                            <!-- Validation message -->
                            <div *ngIf="updateDeliveryStatus.errors && (updateDeliveryStatus.touched || updateDeliveryStatus.dirty)"
                                class="invalid-feedback">
                                Delivery status is required.
                            </div>
                        </div>
                    </div>

                    <button type="submit"  [disabled]="fD.invalid" mat-raised-button class="trackBtn mt-3">
                        Modify Order Tracker W2
                    </button>


                </form>

            </div>
        </div>
    </div>
</div>

<!-- Model Ending for Order Update Delivery Status -->

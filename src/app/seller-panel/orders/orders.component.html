<mat-tab-group class="mt-4" mat-stretch-tabs="false" mat-align-tabs="start" (selectedTabChange)="onTabChange($event)">

    <mat-tab label="Pending Orders">
        <div *ngIf="orders?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPagePending($event)" showFirstLastButtons>
            </mat-paginator>

            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Order Details</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let order of orders; let i = index" [expanded]="i === 0" class="mb-3">

                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">

                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER ID:</span>
                                    {{ order.orderId }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{order.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{order.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{order.orderDateTime}}
                                </span>

                                <span *ngIf="order.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{order.paymentMode}}</span>
                                </span>

                                <span *ngIf="order.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{order.paymentMode}}</span>
                                </span>

                                <button [routerLink]="['/customer/orders-details/', order.id]" mat-raised-button
                                    color="warn" class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>

                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3"
                            *ngFor="let item of order.customerOrderItems">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="item.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>

                                <div class="col-md-6">

                                    <div>
                                        <div *ngIf="order.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>

                                        <div *ngIf="order.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>

                                        <div *ngIf="item.deliveryStatus === 'PENDING'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-danger fs11 fw-bold">PENDING</span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-hourglass-split"></i>
                                                    Estimated Delivery
                                                </strong>
                                                <span *ngIf="item.deliveryDate;" class="bg-warning text-dark rounded-3 p-1">
                                                    {{ item.deliveryDate }}
                                                  </span>
                                                  <span *ngIf="!item.deliveryDate;">
                                                    Not available
                                                  </span>
                                            </small>
                                        </div>

                                    </div>

                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ item.productName }}
                                        </p>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details mt-1 mb-1">
                                        <span>
                                            <strong>OrderId:</strong>
                                            <span>&nbsp; {{ item.razorpayOrderId }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Id: </strong>
                                            <span>&nbsp; ₹{{ item.id }}</span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ item.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ item.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ item.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ item.area }},
                                                {{ item.addressLine1 }},
                                                {{ item.addressLine2}},
                                                {{ item.postalCode}}
                                            </span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{item.userId}} | <strong>{{item.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>

                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ item.quantity }}</td>
                                                <td>₹{{ item.productPrice }}</td>
                                                <td>{{ item.productSize }}</td>
                                                <td>{{ item.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>

                                        <button (click)="updateTrackerData(item.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>

                                <div class="col-md-5 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(item.deliveryStatus), 'completed': i < getStatusIndex(item.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(item.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(item.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->


                                </div>
                            </div>
                        </div>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>

            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPagePending($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="orders?.length === 0 || orders.length === ''"
             class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
            <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
            <p class="mt-2">Data Not Found Pending Orders</p>
          </div>
          
    </mat-tab>

    <mat-tab label="Shipped Orders">
        <div *ngIf="shippedData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageShipping($event)" showFirstLastButtons>
            </mat-paginator>

            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Shipped Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let shippedNode of shippedData; let i = index" [expanded]="i === 0"
                        class="mb-3">

                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">

                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER ID:</span>
                                    {{ shippedNode.orderId }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{shippedNode.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{shippedNode.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{shippedNode.orderDateTime}}
                                </span>

                                <span *ngIf="shippedNode.paymentMode === 'COD'"
                                    class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{shippedNode.paymentMode}}</span>
                                </span>

                                <span *ngIf="shippedNode.paymentMode === 'ONLINE'"
                                    class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{shippedNode.paymentMode}}</span>
                                </span>

                                <button [routerLink]="['/customer/orders-details/', shippedNode.id]" mat-raised-button
                                    color="warn" class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>

                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3"
                            *ngFor="let itemShipped of shippedNode.customerOrderItems">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="itemShipped.fileUrl" alt="Product" height="50" width="50"
                                            class="me-2">
                                    </div>
                                </div>

                                <div class="col-md-7">

                                    <div>
                                        <div *ngIf="shippedNode.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>

                                        <div *ngIf="shippedNode.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>

                                        <div *ngIf="itemShipped.deliveryStatus === 'SHIPPED'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                SHIPPED
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                                <span class="bg-warning text-dark rounded-3 p-1">
                                                {{ itemShipped.deliveryDateTime}}
                                                </span>
                                            </small>
                                        </div>
                                    </div>

                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ itemShipped.productName }}
                                        </p>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ itemShipped.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ itemShipped.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ itemShipped.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ itemShipped.area }},
                                                {{ itemShipped.addressLine1 }},
                                                {{ itemShipped.addressLine2}},
                                                {{ itemShipped.postalCode}}
                                            </span>
                                        </span>
                                    </div>

                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{itemShipped.userId}} | <strong>{{itemShipped.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>

                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ itemShipped.quantity }}</td>
                                                <td>₹{{ itemShipped.productPrice }}</td>
                                                <td>{{ itemShipped.productSize }}</td>
                                                <td>{{ itemShipped.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>

                                        <button (click)="updateTrackerData(itemShipped.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>

                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(itemShipped.deliveryStatus), 'completed': i < getStatusIndex(itemShipped.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(itemShipped.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(itemShipped.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->


                                </div>
                            </div>
                        </div>

                    </mat-expansion-panel>
                </mat-accordion>
            </div>

            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageShipping($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="shippedData?.length === 0 || shippedData?.length === ''"
             class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
            <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
            <p class="mt-2">Data Not Found Shipped Orders</p>
          </div>
    </mat-tab>

    <mat-tab label="Out of Delivery Orders">
        <div *ngIf="outOfDeliveryData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageOutofDelivery($event)" showFirstLastButtons>
            </mat-paginator>
        
            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Out of Delivery Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let OOData of outOfDeliveryData; let i = index" [expanded]="i === 0"
                        class="mb-3">
        
                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">
        
                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER ID:</span>
                                    {{ OOData.orderId }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{OOData.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{OOData.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{OOData.orderDateTime}}
                                </span>
        
                                <span *ngIf="OOData.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{OOData.paymentMode}}</span>
                                </span>
        
                                <span *ngIf="OOData.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{OOData.paymentMode}}</span>
                                </span>
        
                                <button [routerLink]="['/customer/orders-details/', OOData.id]" mat-raised-button color="warn"
                                    class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
        
                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3"
                            *ngFor="let ooDataitem of OOData.customerOrderItems">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="ooDataitem.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>
        
                                <div class="col-md-7">
        
                                    <div>
                                        <div *ngIf="ooDataitem.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>
        
                                        <div *ngIf="ooDataitem.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>
        
                                        <div *ngIf="ooDataitem.deliveryStatus === 'OUT_OF_DELIVERY'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                OUT OF DELIVERY
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                                <span class="bg-warning text-dark rounded-3 p-1">
                                                    {{ ooDataitem.deliveryDateTime}}
                                                    </span>
                                            </small>
                                        </div>
                                    </div>
        
                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ ooDataitem.productName }}
                                        </p>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ ooDataitem.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ ooDataitem.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ ooDataitem.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ ooDataitem.area }},
                                                {{ ooDataitem.addressLine1 }},
                                                {{ ooDataitem.addressLine2}},
                                                {{ ooDataitem.postalCode}}
                                            </span>
                                        </span>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{ooDataitem.userId}} | <strong>{{ooDataitem.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>
        
                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ ooDataitem.quantity }}</td>
                                                <td>₹{{ ooDataitem.productPrice }}</td>
                                                <td>{{ ooDataitem.productSize }}</td>
                                                <td>{{ ooDataitem.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
        
                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>
        
                                        <button (click)="updateTrackerData(ooDataitem.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>
        
                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(ooDataitem.deliveryStatus), 'completed': i < getStatusIndex(ooDataitem.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(ooDataitem.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(ooDataitem.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->
        
        
                                </div>
                            </div>
                        </div>
        
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageOutofDelivery($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="outOfDeliveryData?.length === 0 || outOfDeliveryData?.length === ''"
        class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
       <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
       <p class="mt-2">Data Not Found Out of Delivery Orders</p>
        </div>
    </mat-tab>

    <mat-tab label="Delivered">
         <div *ngIf="deliveredData?.length > 0">
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageDelivered($event)" showFirstLastButtons>
            </mat-paginator>
        
            <div class="container mt-2 p-3" style="border-radius: 10px;background-color: #f2f3f4;">
                <h4 class="order-heading">Delivered Orders</h4>
                <mat-accordion>
                    <mat-expansion-panel *ngFor="let delivered of deliveredData; let i = index" [expanded]="i === 0"
                        class="mb-3">
        
                        <mat-expansion-panel-header class="p-5 d-flex justify-content-between align-items-center">
        
                            <mat-panel-title class="order-info d-flex w-100 align-items-center">
                                <span class="changeDesign">
                                    <span class="headerH">ORDER ID:</span>
                                    {{ delivered.orderId }}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">ORDERS :</span>
                                    {{delivered.totalOrders}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">AMOUNT:</span>
                                    ₹ {{delivered.totalPrice}}
                                </span>
                                <span class="changeDesign">
                                    <span class="headerH">Placed By - </span>
                                    {{delivered.orderDateTime}}
                                </span>
        
                                <span *ngIf="delivered.paymentMode === 'COD'" class="changeDesign bg-light p-1 rounded ">
                                    <span class="fs13">PAY MODE - </span>
                                    <span class="p-1 rounded fs13 COD">{{delivered.paymentMode}}</span>
                                </span>
        
                                <span *ngIf="delivered.paymentMode === 'ONLINE'" class="changeDesign bg-light p-1 rounded">
                                    <span class="fs11">PAY MODE - </span>
                                    <span class="p-1 rounded fs11 ONLINE">{{delivered.paymentMode}}</span>
                                </span>
        
                                <button [routerLink]="['/customer/orders-details/', delivered.id]" mat-raised-button color="warn"
                                    class="mx-2 py-1 moreDetails ms-auto">
                                    Order Details *
                                </button>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
        
                        <div class="card border-0 custom-shadow-and-radius p-3 mb-3"
                            *ngFor="let deliveredItems of delivered.customerOrderItems">
                            <div class="row">
                                <div class="col-md-1">
                                    <div class="d-flex align-items-center mt-2 p-2">
                                        <img [src]="deliveredItems.fileUrl" alt="Product" height="50" width="50" class="me-2">
                                    </div>
                                </div>
        
                                <div class="col-md-7">
        
                                    <div>
                                        <div *ngIf="deliveredItems.paymentStatus === 'PAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="badge-paid fs11">PAID &#10003;</span>
                                        </div>
        
                                        <div *ngIf="deliveredItems.paymentStatus === 'UNPAID'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-warning fs11 fw-bold">UNPAID</span>
                                        </div>
        
                                        <div *ngIf="deliveredItems.deliveryStatus === 'DELIVERED'"
                                            class="d-flex justify-content-between align-items-center">
                                            <span class="bg-light text-success fs11 fw-bold">
                                                DELIVERED
                                                <i class="bi bi-check2-all"></i>
                                            </span>
                                            <small class="text-muted fs12">
                                                <strong>
                                                    <i class="bi bi-truck running-truck"></i>
                                                    Delivery DateTime
                                                </strong>
                                               <span class="bg-warning text-dark rounded-2 p-1" >
                                                {{ deliveredItems.deliveryDateTime}}
                                               </span>
                                            </small>
                                        </div>
                                    </div>
        
                                    <div>
                                        <p class="mt-1 font-bold custom-pname">
                                            {{ deliveredItems.productName }}
                                        </p>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Quantity:</strong>
                                            <span>&nbsp; {{ deliveredItems.quantity }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>Price: </strong>
                                            <span>&nbsp; ₹{{ deliveredItems.productPrice }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                        <span>
                                            <strong>SIZE:</strong>
                                            <span>&nbsp; {{ deliveredItems.productSize }}</span>
                                        </span>
                                        &nbsp; | &nbsp;
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>Address:</strong>
                                            <span>&nbsp;
                                                {{ deliveredItems.area }},
                                                {{ deliveredItems.addressLine1 }},
                                                {{ deliveredItems.addressLine2}},
                                                {{ deliveredItems.postalCode}}
                                            </span>
                                        </span>
                                    </div>
        
                                    <div class="d-flex align-items-center fs13 order-details">
                                        <span>
                                            <strong>User:</strong>
                                            <span>&nbsp; {{deliveredItems.userId}} | <strong>{{deliveredItems.customerName}}
                                                </strong></span>
                                        </span>
                                    </div>
        
                                    <table class="table table-bordered table-sm text-center mt-1"
                                        style="font-size: 13px;max-width: 400px;">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Size</th>
                                                <th>color</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>{{ deliveredItems.quantity }}</td>
                                                <td>₹{{ deliveredItems.productPrice }}</td>
                                                <td>{{ deliveredItems.productSize }}</td>
                                                <td>{{ deliveredItems.productColor }}</td>
                                            </tr>
                                        </tbody>
                                    </table>
        
                                    <div>
                                        <button mat-raised-button class="detailsBtn me-3">
                                            order Details
                                        </button>
        
                                        <button (click)="updateTrackerData(deliveredItems.id)" class="g-4 trackBtn"
                                            mat-raised-button>
                                            Tacker Filler
                                        </button>
                                    </div>
                                </div>
        
                                <div class="col-md-4 ">
                                    <!-- ==============TRACKING STEPPER STARTING================== -->
                                    <div class="container trackerContainer mt-5">
                                        <div class="stepper">
                                            <div *ngFor="let step of statuses; let i = index" class="step">
                                                <div class="step-content">
                                                    <div class="circle"
                                                        [ngClass]="{'active': i <= getStatusIndex(deliveredItems.deliveryStatus), 'completed': i < getStatusIndex(deliveredItems.deliveryStatus)}">
                                                        <i *ngIf="i <= getStatusIndex(deliveredItems.deliveryStatus)"
                                                            class="bi bi-check2"></i>
                                                        <!-- <span *ngIf="i >= getStatusIndex()">{{ i + 1 }}</span> -->
                                                    </div>
                                                    <span class="status-text">{{ step }}</span>
                                                </div>
                                                <div *ngIf="i < statuses.length - 1" class="line"
                                                    [ngClass]="{'completed': i < getStatusIndex(deliveredItems.deliveryStatus)}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ==============TRACKING STEPPER ENDING================== -->
        
        
                                </div>
                            </div>
                        </div>
        
                    </mat-expansion-panel>
                </mat-accordion>
            </div>
        
            <mat-paginator [pageSizeOptions]="[10, 50 , 100 , 250 , 500]" [pageSize]="10" [length]="totalElements"
                (page)="nextPageDelivered($event)" showFirstLastButtons>
            </mat-paginator>
        </div>

        <div *ngIf="deliveredData?.length === 0 || deliveredData?.length === ''"
            class="d-flex flex-column align-items-center justify-content-center text-center mt-3">
        <img src="../../../assets/no-data-found-images/sorry.png" alt="No Data" class="img-fluid no-data-image">
        <p class="mt-2">Data Not Found Out of Delivered Orders</p>
        </div>
    </mat-tab>

</mat-tab-group>

















<!-- Modal for Order Update Delivery Status -->
<div class="modal fade" id="pendingDeliveryModel" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">

                <p>Delivery Status <i class="bi bi-truck running-truck"></i></p>

                <form name="form" #userlogin="ngForm" (ngSubmit)="f.form.valid && updateDeliveryStatus()" #f="ngForm">

                    <div class="col">
                        <div class="form-group">
                            <label class="fs12">Delivery Status</label>
                            <select class="form-control form-select-sm" name="deliveryStatus"
                                [(ngModel)]="deliveryForm.deliveryStatus" #deliveryStatus="ngModel" required
                                [ngClass]="{ 'is-invalid': deliveryStatus.errors && (deliveryStatus.touched || deliveryStatus.dirty) }">
                                <option value="" selected>Select Delivery Status</option>
                                <option value="SHIPPED">SHIPPED</option>
                                <option value="OUT_OF_DELIVERY">OUT_OF_DELIVERY</option>
                                <option value="DELIVERED">DELIVERED</option>
                                <option value="PENDING">PENDING</option>
                            </select>

                            <!-- Validation message -->
                            <div *ngIf="deliveryStatus.errors && (deliveryStatus.touched || deliveryStatus.dirty)"
                                class="invalid-feedback">
                                Delivery status is required.
                            </div>
                        </div>
                    </div>


                    <!-- POSTALCODE -->
                    <div class="col-12">
                        <label class="fs12">TrackerId</label>
                        <input type="tel" class="form-control form-control-sm" name="tackerId" required="required"
                            [(ngModel)]="deliveryForm.tackerId" #tackerId="ngModel" placeholder="Enter Tracker Id"
                            [ngClass]="{ 'is-invalid': tackerId.errors && (tackerId.touched || tackerId.dirty ) }">

                        <div *ngIf="tackerId.errors && (tackerId.touched || tackerId.dirty )" class="invalid-feedback">
                            <div *ngIf="tackerId.errors['required']">Tracker Id is required.</div>
                        </div>
                    </div>

                    <div class="col-12">
                        <label class="fs12">Expected Delivery Date/Time</label>
                        <input type="datetime-local" class="form-control form-control-sm" name="deliveryDate" required="required"
                            [(ngModel)]="deliveryForm.deliveryDateTime" #deliveryDateTime="ngModel"
                            placeholder="Expected Delivery Date"
                            [ngClass]="{ 'is-invalid': deliveryDateTime.errors && (deliveryDateTime.touched || deliveryDateTime.dirty ) }">

                        <div *ngIf="deliveryDateTime.errors && (deliveryDateTime.touched || deliveryDateTime.dirty )"
                            class="invalid-feedback">
                            <div *ngIf="deliveryDateTime.errors['required']">Delivery DateTime is required.</div>
                        </div>
                    </div>


                    <div class="col">
                        <div class="form-group">
                            <label class="fs12">Courier Partner</label>
                            <select class="form-control form-select-sm" name="deliveryStatus"
                                [(ngModel)]="deliveryForm.courierName" #courierName="ngModel" required
                                [ngClass]="{ 'is-invalid': courierName.errors && (courierName.touched || courierName.dirty) }">
                                <option value="" selected>Select Delivery Status</option>
                                <option value="DTDC">DTDC</option>
                                <option value="DELHIVERY">DELHIVERY</option>
                                <option value="INDIA_POST">INDIA POST</option>
                                <option value="SHIP_ROCKET">SHIP ROCKET</option>
                                <option value="BLUE_DART">BLUE DART</option>
                                <option value="ECOMM_EXPRESS">ECOMM EXPRESS</option>
                            </select>

                            <!-- Validation message -->
                            <div *ngIf="courierName.errors && (courierName.touched || courierName.dirty)"
                                class="invalid-feedback">
                                 Courier Partner is required.
                            </div>
                        </div>
                    </div>

                    <button type="submit" [disabled]="f.invalid" mat-raised-button class="trackBtn mt-3">
                        Modify Order Tracker
                    </button>


                </form>

            </div>
        </div>
    </div>
</div>

<!-- Model Ending for Order Update Delivery Status -->